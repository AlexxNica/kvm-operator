dependencies:
    override:
        # circleci normally does this behind the scenes,
        # but as we need to override the inference to stop it running `go get`,
        # we need to do this manually
        - mkdir -p $HOME/.go_project/src/github.com/$CIRCLE_PROJECT_USERNAME
        - ln -fs $HOME/$CIRCLE_PROJECT_REPONAME $HOME/.go_project/src/github.com/$CIRCLE_PROJECT_USERNAME/$CIRCLE_PROJECT_REPONAME
        - |
          echo 'export GOPATH=$GOPATH:$HOME/.go_project' >> ~/.circlerc
        - go build -v

test:
    override:
        - go test -v
